{"ast":null,"code":"import _regeneratorRuntime from\"/Users/lolaueda/Downloads/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/lolaueda/Downloads/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/lolaueda/Downloads/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lolaueda/Downloads/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lolaueda/Downloads/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lolaueda/Downloads/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{observer}from\"mobx-react\";import UserStore from\"./stores/UserStore\";import LoginForm from\"./LoginForm\";import SubmitButton from\"./SubmitButton\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/isLoggedIn\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.userName=result.userName;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/logout\",{method:\"post\",headers:{Accept:\"application/json\",\"Content-type\":\"application/json\"}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.isLoggedIn=false;UserStore.userName=\"\";}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this=this;if(UserStore.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsx(\"div\",{classname:\"container\",children:\"Loading, please wait ...\"})});}else{if(UserStore.isLoggedIn){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{classname:\"container\",children:[\"Welcome \",UserStore.userName,/*#__PURE__*/_jsx(SubmitButton,{text:\"Log out\",disabled:false,onClick:function onClick(){return _this.doLogout();}})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsx(\"div\",{classname:\"container\",children:/*#__PURE__*/_jsx(LoginForm,{})})});}}}]);return App;}(React.Component);export default observer(App);","map":{"version":3,"sources":["/Users/lolaueda/Downloads/frontend/src/App.js"],"names":["React","observer","UserStore","LoginForm","SubmitButton","App","fetch","method","headers","Accept","res","json","result","success","loading","isLoggedIn","userName","console","log","doLogout","Component"],"mappings":"m4BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAO,WAAP,C,2FAEMC,CAAAA,G,+TACJ,wLAEoBC,CAAAA,KAAK,CAAC,aAAD,CAAgB,CACnCC,MAAM,CAAE,MAD2B,CAEnCC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CAEP,eAAgB,kBAFT,CAF0B,CAAhB,CAFzB,QAEQC,GAFR,qCASuBA,CAAAA,GAAG,CAACC,IAAJ,EATvB,QASQC,MATR,eAUI,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC5BX,SAAS,CAACY,OAAV,CAAoB,KAApB,CACAZ,SAAS,CAACa,UAAV,CAAuB,IAAvB,CACAb,SAAS,CAACc,QAAV,CAAqBJ,MAAM,CAACI,QAA5B,CACD,CAJD,IAIO,CACLd,SAAS,CAACY,OAAV,CAAoB,KAApB,CACAZ,SAAS,CAACa,UAAV,CAAuB,KAAvB,CACD,CAjBL,iFAmBIb,SAAS,CAACY,OAAV,CAAoB,KAApB,CACAZ,SAAS,CAACa,UAAV,CAAuB,KAAvB,CApBJ,qE,sNAwBA,+LAEoBT,CAAAA,KAAK,CAAC,SAAD,CAAY,CAC/BC,MAAM,CAAE,MADuB,CAE/BC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CAEP,eAAgB,kBAFT,CAFsB,CAAZ,CAFzB,QAEQC,GAFR,uCASuBA,CAAAA,GAAG,CAACC,IAAJ,EATvB,QASQC,MATR,gBAUI,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC5BX,SAAS,CAACa,UAAV,CAAuB,KAAvB,CACAb,SAAS,CAACc,QAAV,CAAqB,EAArB,CACD,CAbL,qFAeIC,OAAO,CAACC,GAAR,eAfJ,uE,wGAkBA,iBAAS,gBACP,GAAIhB,SAAS,CAACY,OAAd,CAAuB,CACrB,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,WAAf,sCADF,EADF,CAKD,CAND,IAMO,CACL,GAAIZ,SAAS,CAACa,UAAd,CAA0B,CACxB,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,WAAf,sBACWb,SAAS,CAACc,QADrB,cAEE,KAAC,YAAD,EACE,IAAI,CAAE,SADR,CAEE,QAAQ,CAAE,KAFZ,CAGE,OAAO,CAAE,yBAAM,CAAA,KAAI,CAACG,QAAL,EAAN,EAHX,EAFF,GADF,EADF,CAYD,CACD,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,WAAf,uBACE,KAAC,SAAD,IADF,EADF,EADF,CAOD,CACF,C,iBAzEenB,KAAK,CAACoB,S,EA4ExB,cAAenB,CAAAA,QAAQ,CAACI,GAAD,CAAvB","sourcesContent":["import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport UserStore from \"./stores/UserStore\";\nimport LoginForm from \"./LoginForm\";\nimport SubmitButton from \"./SubmitButton\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  async componentDidMount() {\n    try {\n      let res = await fetch(\"/isLoggedIn\", {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      let result = await res.json();\n      if (result && result.success) {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.userName = result.userName;\n      } else {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n      }\n    } catch (e) {\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout() {\n    try {\n      let res = await fetch(\"/logout\", {\n        method: \"post\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-type\": \"application/json\",\n        },\n      });\n      let result = await res.json();\n      if (result && result.success) {\n        UserStore.isLoggedIn = false;\n        UserStore.userName = \"\";\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  render() {\n    if (UserStore.loading) {\n      return (\n        <div className=\"app\">\n          <div classname=\"container\">Loading, please wait ...</div>\n        </div>\n      );\n    } else {\n      if (UserStore.isLoggedIn) {\n        return (\n          <div className=\"app\">\n            <div classname=\"container\">\n              Welcome {UserStore.userName}\n              <SubmitButton\n                text={\"Log out\"}\n                disabled={false}\n                onClick={() => this.doLogout()}\n              />\n            </div>\n          </div>\n        );\n      }\n      return (\n        <div className=\"app\">\n          <div classname=\"container\">\n            <LoginForm />\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default observer(App);\n"]},"metadata":{},"sourceType":"module"}